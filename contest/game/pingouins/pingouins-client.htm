<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Board Games Buddy/BraveRats game</title>
        <meta name="description" content="Play Hey, That's My Fish! against a General Game Playing AI agent">
        <meta name="author" content="[Jean-SÃ©bastien Gonsette]">

		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no"/>
 		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-capable" content="yes">	
	</head>
    <body>

	<style>
		body 
		{ 
			padding: 0; 
			margin: 0; 
			overflow:hidden;
		}
		canvas{
			background-color: black;
			display: block;
			width: 100%;
			height:100%;
			position: block;
			margin:0;
			padding: 0;			
		}
	</style>
  
	<canvas id="canvas" width="750" height="400" style="border:1px solid lightgrey;">
		Your browser does not support the HTML5 canvas tag.
	</canvas>
	
	<script src="../config.js" type="text/javascript"></script>
	<script src="../websocketsClient.js" type="text/javascript"></script>
	<script src="../buddyClient.js" type="text/javascript"></script>
	<script src="../game.js" type="text/javascript"></script>
	<script src="../gameObject.js" type="text/javascript"></script>
	<script src="../fullscreen.js" type="text/javascript"></script>
	<script src="../cardatm/progress.js" type="text/javascript"></script>
	<script src="../cardatm/cardatm.js" type="text/javascript"></script>
	<script src="language.js" type="text/javascript"></script>
	<script src="pingouins.js" type="text/javascript"></script>
	<script src="board.js" type="text/javascript"></script>
	<script src="penguin.js" type="text/javascript"></script>
	<script>
		"use strict";
		let canvas;
		let context;
		let game

		// Extract player types for the game
		const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		var agent_1 = 'alpha'
		var agent_2 = 'player'
		var seed = 0

		// Extract language
		var language = 'en'
		if (urlParams.has ('language')) language = urlParams.get('language')
		if ((language in languages) == false) language = 'en'

		// Extract player stake key
		var stake_key = null
		if (urlParams.has ('key')) stake_key = urlParams.get('key')

		window.onload = init;
		function init()
		{
			canvas = document.getElementById('canvas');
			context = canvas.getContext('2d');			
			
			let dpi = window.devicePixelRatio;
			let style_height = +getComputedStyle(canvas).getPropertyValue("height").slice(0, -2);
			let style_width = +getComputedStyle(canvas).getPropertyValue("width").slice(0, -2);
			
			canvas.setAttribute('height', style_height * dpi);
			canvas.setAttribute('width', style_width * dpi);
			/*
			const ratio = Math.ceil(window.devicePixelRatio);
			canvas.width = screen.width * ratio
			canvas.height = screen.height * ratio
//			canvas.style.width = `${screen.width}px`;
//			canvas.style.height = `${screen.height}px`;
			context.setTransform(ratio, 0, 0, ratio, 0, 0);
*/
			game = new Pingouins (context, SERVER_URI, agent_1, agent_2, languages [language], seed, stake_key)
			
			// Disable context menu on right click
			canvas.oncontextmenu = function (e) {
				e.preventDefault();
			};

		}		

	</script>
    </body>
</html>